tags:
  - 消息
summary: 获取消息详情
description: |
  根据消息ID获取消息的详细信息。
  
  ## 功能说明
  - 获取单条消息的完整信息
  - 支持JWT令牌认证
  - 返回消息内容、状态等

operationId: getMessageDetail
produces:
  - application/json

parameters:
  - name: Authorization
    in: header
    type: string
    required: true
    description: JWT访问令牌，格式：Bearer {token}
    default: "Bearer "

  - name: msg_id
    in: path
    type: string
    required: true
    description: 消息的唯一标识符（UUID或自定义ID）
    example: "msg_123456abc"

responses:
  200:
    description: 获取消息详情成功
    content:
      application/json:
        schema:
          type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              type: object
              properties:
                id:
                  type: string
                  description: 消息公开ID
                  example: "msg_123456abc"
                session_id:
                  type: integer
                  description: 所属会话ID
                  example: 1
                context_id:
                  type: string
                  description: 上下文消息ID
                  example: "ctx_789xyz"
                summary:
                  type: string
                  description: 消息摘要
                  example: "这是一条测试消息的摘要"
                status:
                  type: integer
                  description: 消息状态（0-草稿，1-已发送，2-已读，3-已删除）
                  enum: [0, 1, 2, 3]
                  example: 1
                action:
                  type: integer
                  description: 消息动作类型
                  example: 1
                content:
                  type: string
                  description: 消息内容
                  example: "你好，这是一条测试消息"
                reply:
                  type: string
                  description: 回复内容
                  example: "这是对消息的回复"
                feedback:
                  type: object
                  description: 反馈信息（JSON对象）
                  example: {"rating": 5, "comment": "很好"}
                feedback_text:
                  type: string
                  description: 反馈文本
                  example: "用户反馈内容"
                created_at:
                  type: string
                  format: date-time
                  description: 创建时间
                  example: "2023-10-01T12:00:00Z"
    examples:
      application/json:
        success: true
        data:
          id: "msg_123456abc"
          session_id: 1
          context_id: "ctx_789xyz"
          summary: "消息摘要"
          status: 1
          action: 1
          content: "消息内容"
          reply: "回复内容"
          feedback:
            rating: 5
            comment: "很好"
          feedback_text: "用户反馈内容"
          created_at: "2023-10-01T12:00:00Z"

  401:
    description: 未授权访问
    examples:
      application/json:
        success: false
        error: "无效的认证令牌"

  403:
    description: 权限不足
    examples:
      application/json:
        success: false
        error: "无权访问此消息"

  404:
    description: 消息不存在
    examples:
      application/json:
        success: false
        error: "消息不存在或已被删除"

  500:
    description: 服务器内部错误
    examples:
      application/json:
        success: false
        error: "获取消息详情失败"

security:
  - Bearer: []